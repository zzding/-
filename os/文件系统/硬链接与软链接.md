# 1、概念

在unix与类unix系统中，文件是通过inod来进行定位的，inod是根据节点号来区分的，也就是说文件名并不能直接区分文件

## 1.1 硬链接
> 硬连接指通过索引节点来进行连接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称
为索引节点号(Inode Index)。在Linux中，多个文件名指向同一索引节点是存在的。一般这种连接就是硬连接。硬连接的作用是
**允许一个文件拥有多个有效路径名**，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该
目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的
数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。

## 1.2 软链接
> 另外一种连接称之为符号连接（Symbolic Link），也叫软连接。软链接文件有类似于Windows的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。  

```shell
$touch f1
$ln f1 f2 #ln 默认创建硬链接
$ln -s f1 f3 #ln -s创建软链接
$ls -li # -i参数显示文件的inode节点信息
total 0
9797648 -rw-r--r-- 2 root root 0 Apr 21 08:11 f1
9797648 -rw-r--r-- 2 root root 0 Apr 21 08:11 f2
9797649 lrwxrwxrwx 1 root root 2 Apr 21 08:11 f3 -> f1
```

```shell
$echo "I am f1 file" >>f1
$cat f1
I am f1 file
$cat f2
I am f1 file
$cat f3
I am f1 file
$rm -f f1
$cat f2
I am f1 file
$cat f3
cat: f3: No such file or directory
```




# 2、底层解释
硬链接是多个目录项中的「索引节点」指向一个文件，也就是指向同一个 inode，但是 inode 是不可能跨越文件系统的，每个文件系统都有各自的 inode 数据结构和列表，所以硬链接是不可用于跨文件系统的。由于多个目录项都是指向一个 inode，那么只有删除文件的所有硬链接以及源文件时，系统才会彻底删除该文件。
![](https://picx.zhimg.com/80/v2-7cf8cec396a66dca2dd1fcd6dadab537_1440w.webp?source=1940ef5c)

软链接相当于重新创建一个文件，这个文件有独立的 inode，但是这个文件的内容是另外一个文件的路径，所以访问软链接的时候，实际上相当于访问到了另外一个文件，所以软链接是可以跨文件系统的，甚至目标文件被删除了，链接文件还是在的，只不过指向的文件找不到了而已。

![](https://picx.zhimg.com/80/v2-5606413e1b5d2c727399711d347617a2_1440w.webp?source=1940ef5c)


![](https://pic3.zhimg.com/80/v2-9abd33350e3bcb401f379752874f9b52_1440w.webp)

